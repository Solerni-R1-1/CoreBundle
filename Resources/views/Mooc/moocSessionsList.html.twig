{# render a list of user sessions using moocSessionComponent #}


{#{% block meta %}#}
    {#{{ parent() }}#}
    {#{% if config.getParameter('nameext') != '' %}#}
        {#{{ config.getParameter('nameext') | raw }}#}
    {#{% endif %}#}
{#{% endblock %}#}


{% block meta %}
        <meta name="Description" content='toto'>
    {#{% if not description is empty %}#}
    {#<meta name="Description" content="{{ description.content | striptags }}">#}
    {#{% endif %}#}
    <meta charset="utf-8">
    {# The following line is needed for unit testing as the DOMDocument
       used by the SF's crawler doesn't recognize the HTML5 charset meta tag.
       https://github.com/symfony/symfony/issues/3881  #}
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    {# <meta name="viewport" content="width=device-width, initial-scale=1.0">" #}
{% endblock %}

{% if sessions|length == 0 %}

    {% if sessionsAvailable|length == 0 %}

      <p>{{'no_mooc_today'|trans({}, 'platform')}}</p>
      <a class="desktop_catalogue_link" href="{{ path( 'solerni_catalogue', {}) ~ '#?page=1&rpp=10&fs=type__claroline_core_mooc_moocsession&ss=ispub__true&afs=status,mcat,owner,duration,ispub&sb=false' }}">
          <img class="desktop_catalogue_img" src='{{ asset('bundles/clarolinecore/images/ban_catalogue.png') }}' alt='Consulter le catalogue' width='695px' height='131px'/>
      </a>
    {% else %}

      {% if sessionComponentLayout == 'slider-small' %}
          <ul class="bxslider">
      {% endif %}


      {% for session in sessionsAvailable %}

        {% if sessionComponentLayout == 'slider-small' %}
          <li>
        {% endif %}

        {% render controller(
              'ClarolineCoreBundle:Mooc\\Mooc:renderSessionComponent',
              {   'session':                   session,
                  'showUserProgression':       false,
                  'sessionComponentLayout':    sessionComponentLayout,
                  'showUserProgression':       showUserProgression
              }
          ) %}
        {% if sessionComponentLayout == 'slider-small' %}
          </li>
        {% endif %}

      {% endfor %}

      {% if sessionComponentLayout == 'slider-small' %}
        </ul>
      {% endif %}

      {% if sessionComponentLayout == 'slider-small' %}
          </ul>
          <script type="text/javascript">

          $(document).ready(function(){


            $('.bxslider').css('display','block');
            $('.bxslider').bxSlider({
           {#   pause: 200,
                auto: true,  #}
                mode: 'fade',
                infiniteLoop: false,
                hideControlOnEnd: true
              });

          });

          </script>
      {% endif %}

    {% endif %}

{% else %}

    {% if sessionComponentLayout == 'slider-small' %}
        <ul class="bxslider">
    {% endif %}

    {% for session in sessions %}

    	{% if sessionComponentLayout == 'slider-small' %}
			<li>
		{% endif %}

        {% render controller(
            'ClarolineCoreBundle:Mooc\\Mooc:renderSessionComponent',
            {   'session':                   session,
                'showUserProgression':       true,
                'sessionComponentLayout':    sessionComponentLayout,
                'showUserProgression':       showUserProgression
            }
        ) %}

    	{% if sessionComponentLayout == 'slider-small' %}
			</li>
		{% endif %}

    {% endfor %}

    {% if sessionComponentLayout == 'slider-small' %}
        </ul>
        <script type="text/javascript">

        $(document).ready(function(){


          $('.bxslider').css('display','block');
          $('.bxslider').bxSlider({
         {#   pause: 200,
              auto: true,  #}
              mode: 'fade',
              infiniteLoop: false,
              hideControlOnEnd: true
            });

        });

        </script>
    {% endif %}

{% endif %}