<ul class="panel-body my_badges slrn-my_badges-list">
    <h5 class="slrn-bold slrn-my_badges_enumerate">Il vous reste encore {{ nbTotalBadges - nbAcquiredBadges }} badges Ã  obtenir</h5>
    {% for workspaceBadge in badgePager %}
        {% set badgeType = workspaceBadge.type %}
        {% if 'owned' == badgeType %}
                {% set badge     = workspaceBadge.badge.badge %}
                {% set userBadge = workspaceBadge.badge %}
                {% set buttonLink = path( 'claro_workspace_tool_view_my_badge', {'workspaceId': workspace.id, 'slug': badge.slug } ) %}
        {% else %}
                {% set badge     = workspaceBadge.badge %}
                {% if workspaceBadge.associatedResourceUrl is defined %}
                    {% set buttonLink =  workspaceBadge.associatedResourceUrl %}
                {% endif %}
        {% endif %}
        <li class="slrn-my_badges-list__item">
            <img src="{{ asset(badge.webPath) }}" alt="{{ badge.name }}" class="slrn-my_badges-list__item__image" />
            <section class="slrn-my_badges-list__body">
                <h6 class="slrn-my_badges-list__item__title">Badge &laquo; {{ badge.name }} &raquo;</h6>
                {% if 'owned' == badgeType %} 
                    <span class=" slrn-my_badges-list__body__status"><span class="slrn-bold">Obtenu le :</span> {{ userBadge.issuedAt|date('date_format'|trans({}, 'platform')) }}</span>
                {% endif %}
                {% if 'inprogress' == badgeType %}
                     <span class=" slrn-my_badges-list__body__status"><span class="slrn-bold">Badge en cours d'acquisition</span></span>
                {% endif %}
                <article class="slrn-my_badges-list__content">{{ badge.criteria | raw }}</article>
                <footer class="slrn-my_badges-list__footer">
                    <span class="slrn-gratuit-icon">prix gratuit</span>
                    {% if buttonLink %}
                        <a class="btn btn-primary pull-right" href="{{ buttonLink }}">
                            {% if 'owned' == badgeType %} 
                                {{'my_badge_details'|trans({}, 'platform')}}
                            {% endif %}
                            {% if 'inprogress' == badgeType %} 
                               {{'go_to_evaluation'|trans({}, 'platform')}}
                            {% endif %}
                            {% if 'available' == badgeType %} 
                                {{'get_this_badge'|trans({}, 'platform')}}
                            {% endif %}
                        </a>
                    {% endif %}    
                </footer>
            </section>
        </li>
        {#<li class="col-md-6">
            {% if 'owned' == badgeType %}
                {% set badge     = workspaceBadge.badge.badge %}
                {% set userBadge = workspaceBadge.badge %}
                <div class="panel panel-default badge_panel owned_badge">
                    <div class="panel-heading">
                        <h3 class="panel-title">{{ badge.name }}<small class="pull-right"><span class="icon-ok"></span> {{ 'badge_awarded_on'|trans({'%awardingDate%': userBadge.issuedAt|date('date_format'|trans({}, 'platform'))}, 'badge') }}</small></h3>
                    </div>
                    <div class="panel-body">
                        <div class="col-md-4">
                            <img src="{{ asset(badge.webPath) }}" alt="{{ badge.name }}" class="badge_image_informations" />
                        </div>
                        <div class="col-md-8">
                            <p>{{ badge.description }}</p>
                            <p>
                                <a href="{{ path('claro_workspace_tool_view_my_badge', {'workspaceId': workspace.id, 'slug': badge.slug}) }}" title="{{ 'consult_my_badge_details'|trans({}, 'badge') }}" class="btn btn-default" role="button">
                                    {{ 'consult_my_badge_details'|trans({}, 'badge') }}
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            {% else %}
                {% set badge = workspaceBadge.badge %}
                <div class="panel panel-default badge_panel">
                    <div class="panel-heading">
                        <h3 class="panel-title">{{ badge.name }}{% if 'inprogress' == badgeType %}<small class="pull-right">{{ 'badge_awarding_in_progress'|trans({}, 'badge') }}</small>{% endif %}</h3>
                    </div>
                    <div class="panel-body">
                        <div class="col-md-4">
                            <img src="{{ asset(badge.webPath) }}" alt="{{ badge.name }}" class="badge_image_informations" />
                        </div>
                        <div class="col-md-8">
                            <p>{{ badge.description }}</p>
                        </div>
                    </div>
                </div>
            {% endif %}
        </li>
    {% else %}
        <li class="node-thumbnail node">
            {{ 'no_badges_in_workspace'|trans({}, 'badge')|raw }}
        </li>#}
    {% endfor %}
</ul>

{% if badgePager.haveToPaginate %}
<div>
    {{
        pagerfanta(
            badgePager,
            'twitter_bootstrap_translated',
            {
                'proximity' :    1,
                'routeName':     'claro_workspace_tool_my_badges',
                'routeParams':   {'workspaceId': workspace.id},
                'pageParameter': '[badgePage]'
            }
        )
    }}
</div>
{% endif %}
